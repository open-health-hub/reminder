{% extends "base/base.html" %}

{% block bodyclass %}reminder-list{% endblock %}

{% block content %}
<div id="content">
  <header class="content_header">
    <h1>My reminders</h1>
  </header>

  <div class="container">

    {% for reminder in reminders %}

    <div class="reminder clearfix">

      <div class="info-left box-sizing-border">

        <h3><span class="meta">Send to</span> {{ reminder.telnumber }} </h3>
        <form method="POST" action="{% url "reminders:trigger" reminder.pk %}" style="display: inline;">
          {% csrf_token %}
          <button type="submit">Test</button>
        </form>

        <form method="POST" action="{% url "reminders:delete" reminder.pk %}" style="display: inline;">
          {% csrf_token %}
          <button type="submit">Delete</button>
        </form>
      </div>

      <div class="info-right box-sizing-border">
        <span class="meta">Message</span>
        {% if reminder.message %}
          <p>{{ reminder.message }}</p>
        {% else %}
          <audio src="{{ reminder.audiourl }}" controls>
            Unfortunately your browser does not support the <code>audio</code> element.
          </audio>
        {% endif %}

        <p>
          <span class="meta">Timings</span>
          {% for time in reminder.times.all %}
          <span class="cron">{{ time.cronstring }}</span>{% if not forloop.last %},{% endif %}
          {% endfor %}
        </p>

      </div>


      </p>
    </div>

    {% empty %}
    <p class="align-center">
      You have no reminders.
    </p>
    {% endfor %}

    <p>
      <a href="{% url "reminders:create" %}" class="submit">Set up a new reminder</a>
    </p>

  </div>

</div>


</div>

{% endblock %}
